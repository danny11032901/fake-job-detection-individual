
#  Fake Job Posting Detection using Logistic Regression-----------------

import pandas as pd
import numpy as np
from sklearn.model_selection import train_test_split
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.linear_model import LogisticRegression
from sklearn.metrics import accuracy_score, classification_report, confusion_matrix
from sklearn.utils import shuffle

# 1 Load and prepare dataset
df = pd.read_csv("fake_job_postings.csv")
print(" Data loaded successfully!")
print("Shape:", df.shape)
print("Missing values:", df.isnull().sum().sum())

# Keep only useful columns (adjust as per dataset)
df = df[['title', 'description', 'requirements', 'fraudulent']].fillna("")

# Combine text fields for better context
df['text'] = df['title'] + " " + df['description'] + " " + df['requirements']

# Shuffle dataset to avoid bias
df = shuffle(df, random_state=42)

X = df['text']
y = df['fraudulent']

#  Text vectorization (TF-IDF)
vectorizer = TfidfVectorizer(stop_words='english', max_features=10000, ngram_range=(1,2))
X_vec = vectorizer.fit_transform(X)

#  Train-test split
X_train, X_test, y_train, y_test = train_test_split(
    X_vec, y, test_size=0.2, random_state=42, stratify=y
)

#  Train Logistic Regression model
model = LogisticRegression(max_iter=300, class_weight='balanced')
model.fit(X_train, y_train)

#  Evaluate model
y_pred = model.predict(X_test)

print("\n Model Performance:")
print(f"Accuracy: {accuracy_score(y_test, y_pred):.4f}")
print("\nClassification Report:\n", classification_report(y_test, y_pred))
print("\nConfusion Matrix:\n", confusion_matrix(y_test, y_pred))

# Test with example postings
test_samples = [
    "Work from home! Limited vacancies. Apply now.",
    "We are hiring a data scientist for our Bangalore office.",
    "Earn $5000 per week. No experience required!",
]

sample_features = vectorizer.transform(test_samples)
predictions = model.predict(sample_features)

print("\n Sample Predictions:")
for text, pred in zip(test_samples, predictions):
    label = "FAKE" if pred == 1 else "REAL"
    print(f"â†’ {label}: {text}")
